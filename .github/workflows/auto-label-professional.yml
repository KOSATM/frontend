name: Extended Commit Labeling with Custom Professional Labels

on:
  pull_request:
    types: [opened, synchronize, edited]

jobs:
  create-labels:
    runs-on: ubuntu-latest
    steps:
      - name: Create required labels
        uses: actions/github-script@v7
        with:
          script: |
            const labels = {
              "Feature": "1abc9c",
              "Bug": "e74c3c",
              "Documentation": "3498db",
              "Style": "9b59b6",
              "Refactor": "8e44ad",
              "Performance": "f1c40f",
              "Test": "2ecc71",
              "Chore": "95a5a6",
              "Build": "34495e",
              "CI": "16a085",
              "Design UI": "e67e22",
              "Rename": "d35400",
              "Remove": "c0392b"
            };

            for (const [name, color] of Object.entries(labels)) {
              try {
                await github.rest.issues.getLabel({
                  owner: context.repo.owner,
                  repo: context.repo.repo,
                  name
                });
              } catch {
                await github.rest.issues.createLabel({
                  owner: context.repo.owner,
                  repo: context.repo.repo,
                  name,
                  color
                });
              }
            }

  label-by-commit:
    needs: create-labels
    runs-on: ubuntu-latest
    steps:
      - name: Apply professional labels
        uses: bcoe/conventional-release-labels@v1
        with:
          types: >
            feat: Feature
            fix: Bug
            docs: Documentation
            style: Style
            refactor: Refactor
            perf: Performance
            test: Test
            chore: Chore
            build: Build
            ci: CI
            design: Design UI
            rename: Rename
            remove: Remove
